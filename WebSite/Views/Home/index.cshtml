@using System.Globalization
@using DataModels
@model Session<Account>

@{
    ViewData["Title"] = "Home Page";
    if (Model != null)
    {
        if (Model.Data != null)
            Layout = "AuthorizedLayout";
        else Layout = "NotAuthorizedLayout";
    }
    var themes = ViewData["ThemeList"] as List<Theme>;
    var themesHistory = ViewData["ThemeHistory"] as List<ExercisesHistory>;
}
@if (themes != null)
{
    <div class="cards-container">
        @foreach (var theme in themes)
        {
            <form method="get" class="card" id="@theme.ThemeId">
                @if (themesHistory != null)
                {
                    @if (themesHistory.FirstOrDefault(e => e.Exercise.ThemeId == theme.ThemeId) != null) ;
                    {
                        <img class="card-verifier" src="~/Images/verifyIcon.png" alt="verifyIcon">
                    }
                }
                <h2>@theme.Name</h2>
                <a>Количество команд: @theme.Commands.Count</a>
                <p>Изменено: @theme.UpdatedUTC.ToLocalTime().ToString(CultureInfo.GetCultureInfo("ru-RU"))</p>
                <a class="card-hyper-text" asp-route-id="@theme.ThemeId" asp-controller="Theme" asp-action="Theory">Читать</a>
            </form>
        }
    </div>
}